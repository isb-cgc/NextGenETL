Search.setIndex({"alltitles":{"API":[[0,null]],"Contents:":[[8,null]],"ISB-CGC ETL documentation":[[8,null]],"cda_bq_etl.bq_helpers.create_modify":[[1,null]],"cda_bq_etl.bq_helpers.lookup":[[2,null]],"cda_bq_etl.bq_helpers.schema":[[3,null]],"cda_bq_etl.data_helpers":[[4,null]],"cda_bq_etl.gcs_helpers":[[5,null]],"cda_bq_etl.pdc_helpers":[[6,null]],"cda_bq_etl.utils":[[7,null]]},"docnames":["api","generated/cda_bq_etl.bq_helpers.create_modify","generated/cda_bq_etl.bq_helpers.lookup","generated/cda_bq_etl.bq_helpers.schema","generated/cda_bq_etl.data_helpers","generated/cda_bq_etl.gcs_helpers","generated/cda_bq_etl.pdc_helpers","generated/cda_bq_etl.utils","index"],"envversion":{"sphinx":65,"sphinx.domains.c":3,"sphinx.domains.changeset":1,"sphinx.domains.citation":1,"sphinx.domains.cpp":9,"sphinx.domains.index":1,"sphinx.domains.javascript":3,"sphinx.domains.math":2,"sphinx.domains.python":4,"sphinx.domains.rst":2,"sphinx.domains.std":2},"filenames":["api.rst","generated/cda_bq_etl.bq_helpers.create_modify.rst","generated/cda_bq_etl.bq_helpers.lookup.rst","generated/cda_bq_etl.bq_helpers.schema.rst","generated/cda_bq_etl.data_helpers.rst","generated/cda_bq_etl.gcs_helpers.rst","generated/cda_bq_etl.pdc_helpers.rst","generated/cda_bq_etl.utils.rst","index.rst"],"indexentries":{},"objects":{"cda_bq_etl":[[4,0,0,"-","data_helpers"],[5,0,0,"-","gcs_helpers"],[6,0,0,"-","pdc_helpers"],[7,0,0,"-","utils"]],"cda_bq_etl.bq_helpers":[[1,0,0,"-","create_modify"],[2,0,0,"-","lookup"],[3,0,0,"-","schema"]],"cda_bq_etl.bq_helpers.create_modify":[[1,1,1,"","await_insert_job"],[1,1,1,"","await_job"],[1,1,1,"","change_status_to_archived"],[1,1,1,"","copy_bq_table"],[1,1,1,"","create_and_load_table_from_jsonl"],[1,1,1,"","create_and_load_table_from_tsv"],[1,1,1,"","create_bq_dataset"],[1,1,1,"","create_table_from_query"],[1,1,1,"","create_view_from_query"],[1,1,1,"","delete_bq_table"],[1,1,1,"","load_create_table_job"],[1,1,1,"","publish_table"],[1,1,1,"","update_friendly_name"],[1,1,1,"","update_table_description"],[1,1,1,"","update_table_labels"],[1,1,1,"","update_table_schema_from_generic"]],"cda_bq_etl.bq_helpers.lookup":[[2,1,1,"","exists_bq_dataset"],[2,1,1,"","exists_bq_table"],[2,1,1,"","find_missing_columns"],[2,1,1,"","find_most_recent_published_refseq_table_id"],[2,1,1,"","find_most_recent_published_table_id"],[2,1,1,"","get_columns_in_table"],[2,1,1,"","get_gdc_program_list"],[2,1,1,"","get_most_recent_published_table_id_dcf"],[2,1,1,"","get_most_recent_published_table_id_pdc"],[2,1,1,"","get_pdc_per_project_dataset"],[2,1,1,"","get_pdc_per_study_dataset"],[2,1,1,"","get_pdc_project_metadata"],[2,1,1,"","get_pdc_projects_metadata_list"],[2,1,1,"","list_tables_in_dataset"],[2,1,1,"","query_and_retrieve_result"],[2,1,1,"","query_and_return_row_count"],[2,1,1,"","table_has_new_data"]],"cda_bq_etl.bq_helpers.schema":[[3,1,1,"","convert_object_structure_dict_to_schema_dict"],[3,1,1,"","create_and_upload_schema_for_json"],[3,1,1,"","create_and_upload_schema_for_tsv"],[3,1,1,"","create_schema_object"],[3,1,1,"","generate_bq_schema_fields"],[3,1,1,"","get_gene_info_schema_tags"],[3,1,1,"","get_program_schema_tags_gdc"],[3,1,1,"","get_program_schema_tags_icdc"],[3,1,1,"","get_project_level_schema_tags"],[3,1,1,"","get_uniprot_schema_tags"],[3,1,1,"","reorder_data_types_dict"],[3,1,1,"","retrieve_bq_schema_object"]],"cda_bq_etl.data_helpers":[[4,1,1,"","aggregate_column_data_types_tsv"],[4,1,1,"","check_value_type"],[4,1,1,"","create_normalized_tsv"],[4,1,1,"","create_tsv_row"],[4,1,1,"","get_column_list_tsv"],[4,1,1,"","initialize_logging"],[4,1,1,"","is_int_value"],[4,1,1,"","json_datetime_to_str_converter"],[4,1,1,"","normalize_flat_json_values"],[4,1,1,"","normalize_value"],[4,1,1,"","recursively_detect_object_structures"],[4,1,1,"","resolve_type_conflict"],[4,1,1,"","resolve_type_conflicts"],[4,1,1,"","write_list_to_jsonl"],[4,1,1,"","write_list_to_jsonl_and_upload"]],"cda_bq_etl.gcs_helpers":[[5,1,1,"","download_from_bucket"],[5,1,1,"","download_from_external_bucket"],[5,1,1,"","transfer_between_buckets"],[5,1,1,"","upload_to_bucket"]],"cda_bq_etl.pdc_helpers":[[6,1,1,"","build_obj_from_pdc_api"],[6,1,1,"","get_graphql_api_response"]],"cda_bq_etl.utils":[[7,1,1,"","calculate_md5sum"],[7,1,1,"","construct_table_name"],[7,1,1,"","create_clinical_table_id"],[7,1,1,"","create_dev_table_id"],[7,1,1,"","create_excluded_records_table_id"],[7,1,1,"","create_metadata_table_id"],[7,1,1,"","create_per_sample_table_id"],[7,1,1,"","create_quant_table_id"],[7,1,1,"","format_seconds"],[7,1,1,"","get_filename"],[7,1,1,"","get_filepath"],[7,1,1,"","get_scratch_fp"],[7,1,1,"","has_fatal_error"],[7,1,1,"","input_with_timeout"],[7,1,1,"","load_config"],[7,1,1,"","make_string_bq_friendly"],[7,1,1,"","sanitize_file_prefix"]]},"objnames":{"0":["py","module","Python module"],"1":["py","function","Python function"]},"objtypes":{"0":"py:module","1":"py:function"},"terms":{"":[1,2,3,4,6,7],"0":[3,4,7],"1":[3,4],"10":4,"100":4,"10th":4,"11":4,"13":4,"2023":[],"2024":[],"2025":[],"3":[4,6],"9":7,"A":[1,7],"AND":[],"AS":[],"BE":[],"BUT":[],"FOR":[],"IN":[],"If":[2,3,4,5,7],"NO":[],"NOT":[],"Not":4,"OF":[],"OR":4,"THE":[],"TO":[],"The":[],"There":3,"WITH":[],"_":7,"_emptyrowiter":2,"about":3,"abov":[],"action":[],"add":[1,7],"affect":2,"after":[3,7],"aggreg":4,"aggregate_column_data_types_tsv":4,"all":4,"allow":7,"alphanumer":7,"alter":2,"alter_json_funct":6,"alter_program_nam":2,"an":[1,7],"analysi":4,"analyz":[3,4],"ani":[1,2,4,6,7],"anoth":7,"anyth":4,"api":[1,6,8],"api_param":[1,2],"append":[1,4,7],"appli":1,"ar":[1,2,4],"arbitrari":4,"archiv":1,"archived_table_id":1,"arg":7,"aris":[],"arrai":4,"associ":2,"attempt":1,"author":[],"autodetect":1,"automat":7,"await":2,"await_insert_job":1,"await_job":1,"back":4,"backward":4,"base":[4,6,7],"base_script":4,"baseexcept":7,"bash":7,"becaus":4,"been":3,"befor":[1,3,4,6,7],"begin":7,"behavior":[1,4],"being":[1,3,4],"belong":2,"better":3,"between":3,"bigqueri":[1,2,3,4,7],"biologi":[],"blob":5,"bool":[1,2,3,4,5,6,7],"boolean":4,"both":4,"bq":[2,3,4],"bq_helper":5,"bq_job":1,"bqecosystem":[1,2,3],"bqqueryresult":2,"bucket":[3,4,5],"bucket_fil":5,"bucket_path":5,"build_obj_from_pdc_api":6,"built":4,"calcul":7,"calculate_md5sum":7,"call":[1,4],"callabl":6,"case":[1,3,4],"cast":4,"cda":[2,7],"cellar":4,"chang":[1,3],"change_status_to_archiv":1,"charact":[1,7],"charg":[],"check":[3,4],"check_value_typ":4,"checksum":7,"claim":[],"class":3,"cli":7,"client":1,"clinic":7,"cloud":[3,4,5],"coercion":4,"column":[1,2,3,4],"column_head":[3,4],"columntyp":[3,4],"com":4,"combin":4,"common":7,"compar":2,"compat":[4,7],"complet":1,"condit":[],"config":[1,2,3,4,5,6,7],"configur":7,"confirm":5,"conflict":4,"connect":[],"consol":4,"construct":[1,7],"construct_table_nam":7,"contain":[1,2,4],"content":1,"continu":7,"contract":[],"convers":4,"conversion_rul":4,"convert":[3,4,7],"convert_object_structure_dict_to_schema_dict":3,"copi":1,"copy_bq_t":1,"copyright":[],"correct":4,"correspond":4,"count":2,"creat":[1,2,3,4,5,6,7],"create_and_load_table_from_jsonl":1,"create_and_load_table_from_tsv":1,"create_and_upload_schema_for_json":3,"create_and_upload_schema_for_tsv":3,"create_bq_dataset":1,"create_clinical_table_id":7,"create_dev_table_id":7,"create_excluded_records_table_id":7,"create_metadata_table_id":7,"create_normalized_tsv":4,"create_per_sample_table_id":7,"create_quant_table_id":7,"create_schema_object":3,"create_table_from_queri":1,"create_tsv_row":4,"create_view_from_queri":1,"critic":1,"csv":1,"current":[1,2,3],"current_table_id":2,"custom":[1,3,4,7],"custom_nam":1,"damag":[],"data":[1,2,3,4,7],"data_fil":1,"data_schema_dict":3,"data_typ":3,"data_type_set":4,"data_types_dict":3,"dataset":[1,2,3,4,7],"dataset_format_obj":3,"dataset_id":2,"dataset_nam":1,"date":4,"datetim":4,"datetime_obj":4,"dcf":2,"deal":[],"default":[1,3,4,5,7],"defin":[2,5],"definit":[1,3],"delet":[1,3,5],"delete_bq_t":1,"delete_loc":[3,5],"delimit":4,"deriv":[3,4],"descript":[1,3],"dest_tabl":1,"destin":4,"detect":[3,4],"determin":[2,3],"dev":[1,7],"dict":[1,2,3,4,5,6,7],"dictionari":3,"differ":[2,4],"dir":7,"dir_path":[5,7],"directli":[4,6],"directori":[3,5,7],"distribut":[],"divid":2,"do":4,"doc":4,"document":[],"doesn":1,"download":[5,7],"download_from_bucket":5,"download_from_external_bucket":5,"duplic":7,"dure":1,"e":[1,2,4,7],"each":[1,4,5],"either":2,"els":[1,2,5,7],"emit_to_consol":4,"empti":[1,4,5],"end":[4,7],"endpoint":6,"entir":1,"entiti":3,"err":7,"error":[1,4,6,7],"etc":7,"evalu":4,"even":[2,4],"event":[],"everi":[3,4],"ex":4,"except":7,"exclud":[2,7],"execut":[1,2,4],"exist":[1,2,4],"exists_bq_dataset":2,"exists_bq_t":2,"exit":[1,7],"expand":[5,7],"expand_fp":5,"express":[],"extens":7,"extern":7,"fail":[2,6],"fail_on_error":6,"fals":[1,2,3,4,5,6,7],"fast":6,"fatal":4,"field":[3,4],"field_nam":4,"file":[1,3,4,5,6,7],"file_extens":7,"file_path":7,"file_prefix":7,"filenam":[3,4,5,7],"filepath":[4,5,7],"filter":2,"filter_term":2,"final":7,"find":[2,4],"find_missing_column":2,"find_most_recent_published_refseq_table_id":2,"find_most_recent_published_table_id":2,"first":3,"fit":[],"flat":4,"float":[3,4,7],"float64":4,"folder":5,"follow":[1,4],"form":4,"format":[1,2,3,4,6,7],"format_second":7,"found":[2,4],"framework":4,"free":[],"friendli":1,"friendly_name_suffix":1,"from":[1,2,3,4,5,6,7],"full":7,"function":[1,2,3,4,5,6,7],"furnish":[],"futur":[1,2],"g":[1,2,4,7],"gc":5,"gdc":[2,3],"gene":3,"gener":[1,3,4,7],"generate_bq_schema_field":3,"generate_definit":1,"get":[2,3,7],"get_column_list_tsv":4,"get_columns_in_t":2,"get_filenam":7,"get_filepath":7,"get_gdc_program_list":2,"get_gene_info_schema_tag":3,"get_graphql_api_respons":6,"get_most_recent_published_table_id_dcf":2,"get_most_recent_published_table_id_pdc":2,"get_pdc_per_project_dataset":2,"get_pdc_per_study_dataset":2,"get_pdc_project_metadata":2,"get_pdc_projects_metadata_list":2,"get_program_schema_tags_gdc":3,"get_program_schema_tags_icdc":3,"get_project_level_schema_tag":3,"get_scratch_fp":7,"get_uniprot_schema_tag":3,"given":[2,4],"go":3,"good":6,"googl":[4,5],"grant":[],"graphql":6,"group":2,"guarante":4,"ha":2,"has_fatal_error":7,"have":[2,3],"header":[1,3,4],"header_list":4,"header_row":[3,4],"header_row_index":4,"helper":5,"here":3,"herebi":[],"highest":4,"hold":3,"holder":[],"home":7,"hour":7,"how":3,"http":4,"i":[1,2,3,4,6],"icdc":3,"id":[1,2,3,7],"identifi":1,"illeg":7,"impact":3,"impli":[],"implicit":4,"includ":[3,7],"include_releas":[3,7],"include_trivial_column":2,"inclus":3,"index":[3,4],"info":3,"ingest":3,"initi":4,"initialize_log":4,"input":7,"input_with_timeout":7,"insert":[1,4],"institut":[],"int":[1,2,3,4,5,6,7],"int64":4,"integ":3,"interact":6,"interv":4,"is_fin":7,"is_gdc":1,"is_int_valu":4,"is_metadata":2,"is_tsv":4,"iter":4,"its":4,"job":1,"job_config":1,"join":7,"joined_record_list":4,"json":[1,4,6],"json_datetime_to_str_convert":4,"json_obj_list":4,"jsonl":[1,4,6,7],"jsonl_fil":1,"jsonl_fp":4,"jsonlist":[3,4],"kei":[4,7],"keyboard":7,"kind":[],"label":1,"label_dict":1,"larg":4,"last":[1,2],"level":[3,7],"liabil":[],"liabl":[],"lib":4,"like":[3,4],"limit":7,"line":1,"list":[1,2,3,4,6,7],"list_tables_in_dataset":2,"ll":4,"load":1,"load_config":7,"load_create_table_job":1,"loadjob":1,"loadjobconfig":1,"local":[3,4,7],"local_filepath":4,"locat":[1,2,3,5,7],"log":[4,5],"log_filepath":4,"logger":4,"longer":6,"look":2,"make":3,"make_string_bq_friendli":7,"mani":3,"manual":3,"map":7,"match":2,"matrix":7,"md5":7,"merchant":[],"merg":[],"messag":7,"metadata":[1,2,3,7],"metadata_fil":1,"mi":3,"minut":7,"misc":4,"miss":2,"mode":4,"modifi":1,"modul":4,"monitor":1,"more":4,"most":[1,2],"multipl":4,"mutat":6,"n":7,"name":[1,2,3,4,5,7],"nativ":1,"necessari":4,"nest":[3,4],"nested_obj":4,"new":[1,2,4],"newli":2,"node":2,"non":[3,4],"none":[1,2,3,4,5,6,7],"nonetyp":4,"noninfring":[],"normal":4,"normalize_flat_json_valu":4,"normalize_valu":4,"normalized_tsv_fp":4,"note":[1,4],"notic":[],"null":[2,3,4],"null_mark":[1,4],"num_header_row":1,"number":[1,2,3,4,7],"numer":4,"obj":4,"object":[1,3,4,5,6],"obtain":4,"often":6,"one":[1,3,4,7],"onli":[2,3,4,7],"onto":[1,5],"open":[4,7],"option":[1,2,3,4,5,6,7],"order":[2,3,4,7],"origin":4,"other":[],"otherwis":[1,2,4,6],"out":[],"output":[1,2,4,7],"outsid":5,"overrid":5,"overridden":1,"overwritten":4,"pagin":6,"pair":3,"param":[1,2,3,4,5,6,7],"paramet":[1,2,3,4,5,6,7],"parent":[1,4],"pars":[1,3],"particular":[],"pass":2,"path":[3,4,5,7],"pdc":[2,3,6,7],"pdc_study_id":2,"per":[2,7],"perform":4,"perman":1,"permiss":[],"permit":[],"person":[],"pipelin":[3,8],"popul":[1,3],"portion":7,"possibl":4,"preced":4,"prefix":[4,7],"previou":2,"previous_table_id":2,"previous_vers":1,"prior":[3,4,6],"probabl":3,"process":1,"produc":1,"product":1,"program":[2,3],"program_nam":3,"program_short_nam":2,"project":[1,2,3,5],"project_dataset_id":2,"project_id":1,"project_nam":2,"project_short_nam":2,"project_submitter_id":[2,3],"provid":4,"public":2,"publish":[1,2],"publish_t":1,"pull":2,"purpos":[],"py":4,"python":[4,7],"python3":4,"quant":7,"queri":[1,2,6],"query_and_retrieve_result":2,"query_and_return_row_count":2,"queryjob":[1,2],"random":6,"rather":7,"raw":[4,7],"raw_tsv_fp":4,"re":4,"recent":[1,2],"record":[1,3,4,6,7],"record_list":[3,4],"recurs":3,"recursively_detect_object_structur":[3,4],"refer":[4,7],"rel":[1,5],"releas":[1,2,3,4,7],"release_as_suffix":7,"rename_program":2,"reorder":3,"reorder_data_types_dict":3,"reorder_nest":3,"repair":3,"replac":[1,7],"replace_t":1,"repo":[1,2],"repres":[1,3,4,7],"represent":4,"request":[6,7],"request_funct":6,"resolv":4,"resolve_type_conflict":[3,4],"respons":[1,6,7],"restrict":[],"result":[1,2,3,6],"retriev":[2,3,4,5,7],"retrieve_bq_schema_object":3,"return":[1,2,3,4,6,7],"right":[],"root":7,"round":7,"row":[1,2,3,4,7],"row_list":4,"rowdict":[3,4],"rowiter":2,"rtype":4,"rule":4,"run":3,"safe":[4,7],"same":1,"sampl":[4,7],"sample_interv":[3,4],"sanit":7,"sanitize_file_prefix":7,"schema":1,"schema_dir":3,"schema_filenam":3,"schema_fp":3,"schema_obj_list":3,"schema_tag":1,"schemafield":[1,3],"schemafieldformat":3,"scope":5,"scratch":[4,5,7],"scratch_dir":7,"scratch_fp":5,"script":[4,7,8],"search":2,"second":7,"see":[4,7],"select":[1,4],"sell":[],"serial":[4,6],"server":6,"set":[4,5,7],"shall":[],"share":4,"short":2,"should":[1,2,3],"singl":[1,4,7],"skip":[1,3,4],"skip_row":[3,4],"so":[],"softwar":[],"some":1,"sourc":[1,5],"source_bucket_nam":5,"source_table_id":1,"space":7,"specifi":[1,4,5],"sql":[1,2,4],"src":5,"src_tabl":1,"standard":[1,2,4],"start":[3,4,7],"statu":1,"storag":5,"store":[2,3,4],"str":[1,2,3,4,5,6,7],"string":[1,2,3,4,5,6,7],"strip":2,"structur":[1,3,4],"studi":2,"subject":[],"sublicens":[],"submit":6,"submitt":[2,3],"subset":7,"substanti":[],"substitut":7,"substr":2,"successfulli":1,"suffix":7,"supersed":4,"suppli":[1,2,3,4,6,7],"system":[],"t":1,"tab":4,"tabl":[1,2,3,7],"table_base_nam":2,"table_filter_str":2,"table_has_new_data":2,"table_id":[1,2],"table_nam":[3,7],"table_param":2,"tableschema":3,"tag":[1,3],"target":[1,5],"target_bucket_fil":5,"target_bucket_nam":5,"than":[4,7],"thei":2,"therein":4,"thi":[1,3,4],"this_column_nam":1,"through":3,"throw":[1,6,7],"time":[4,6,7],"timestamp":4,"top":7,"tort":[],"transfer":5,"transfer_between_bucket":5,"transform":4,"travers":4,"tri":6,"trigger":4,"trivial":4,"true":[1,2,3,4,5,6,7],"tsv":[1,3,4,7],"tsv_file":1,"tsv_fp":[3,4],"tupl":[2,7],"type":[1,2,3,4,6,7],"types_dict":4,"types_set":4,"underscor":7,"uniprot":[2,3],"up":[2,4,6],"updat":[1,2],"update_friendly_nam":1,"update_table_descript":1,"update_table_label":1,"update_table_schema_from_gener":1,"upload":[3,4,5],"upload_to_bucket":5,"uri":5,"uri_path":5,"us":[1,2,3,4,5,6,7],"user":7,"usr":4,"valid":[2,7],"valu":[1,2,3,4,7],"vari":4,"verbos":5,"verifi":4,"version":[1,2,4,7],"versioned_table_id":2,"via":1,"view":1,"view_id":1,"view_queri":1,"vm":[3,4,5,7],"w":4,"wa":3,"wai":3,"wait":[2,7],"warranti":[],"we":1,"what":4,"when":4,"where":[1,4],"whether":[2,3,4],"which":[1,2,3,4,5,6],"whom":[],"within":[2,3],"without":7,"word":7,"work":4,"would":[1,2,3],"write":[4,6],"write_list_to_jsonl":4,"write_list_to_jsonl_and_upload":4,"written":4,"xx":1,"yaml":[1,2,3,4,5,6,7],"yaml_dict_kei":7,"z":7},"titles":["API","cda_bq_etl.bq_helpers.create_modify","cda_bq_etl.bq_helpers.lookup","cda_bq_etl.bq_helpers.schema","cda_bq_etl.data_helpers","cda_bq_etl.gcs_helpers","cda_bq_etl.pdc_helpers","cda_bq_etl.utils","ISB-CGC ETL documentation"],"titleterms":{"api":0,"bq_helper":[1,2,3],"cda_bq_etl":[1,2,3,4,5,6,7],"cgc":8,"content":8,"create_modifi":1,"data_help":4,"document":8,"etl":8,"gcs_helper":5,"isb":8,"lookup":2,"pdc_helper":6,"schema":3,"util":7}})